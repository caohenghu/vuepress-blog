---
category: 技术
tags:
  - vim
date: 2021-06-18
title: vim常用命令
vssue-title: vim常用命令
---

> 平时用到终端比较多，这时候熟悉一些常用的 `vim` 命令就会很方便。

<!-- more -->

## 模式

- 正常模式：

  - 使用快捷键命令
  - `:` 输入命令行

- 插入模式：

  - `i` 在光标前插入
  - `a` 在光标后插入
  - `A` 在光标所在行末插入
  - `o` 在光标下插入空行
  - `O` 在光标上插入空行

  > 一个小技巧：按`8`，再按`i`，进入插入模式，输入`=`， 按`esc`退出插入模式，就会出现 8 个`=`。这在插入分割线时非常有用，如按`30`，再按`i`，输入`+`，再按`esc`，就插入了 30 个`+`组成的分割线

- 可视模式：

  - `v` 进入可视模式，移动光标可以选择文本
  - `V` 进入可视行模式， 总是整行整行的选中
  - `ctrl+v` 进入可视块模式，按块选中

- 替换模式：

  - `R` 进入

## 移动

- `h`或`退格` 左移一个字符；
- `l`或`空格` 右移一个字符；
- `j` 下移一行；
- `k` 上移一行；
- `w` 后移一个单词，光标停在下一个单词开头；
- `e` 后移一个单词，光标停在当前单词末尾；
- `b` 前移一个单词，光标停在当前单词开头；
- `ge` 前移一个单词，光标停在上一个单词末尾；
- `{` 前移 1 段。
- `}` 后移 1 段。
- `f[c]` 把光标移到同一行的下一个 c 字符处
- `F[c]` 把光标移到同一行的上一个 c 字符处
- `t[c]` 把光标移到同一行的下一个 c 字符前
- `T[c]` 把光标移到同一行的上一个 c 字符后
- `;` 配合 f & t 使用，重复一次
- `,` 配合 f & t 使用，反向重复一次

> 上面的操作都可以配合 n 使用，比如在正常模式下输入 3h， 则光标向左移动 3 个字符

- `0` 移动到行首
- `^` 移动到本行第一个非空白字符
- `$` 移动到行尾
- `H` 把光标移到屏幕最顶端一行
- `M` 把光标移到屏幕中间一行
- `L` 把光标移到屏幕最底端一行
- `gg` 到文件头部
- `:$`或`G` 到文件尾部
- `:[n]`或`[n]G` 到文件第 n 行

## 删除（剪切）

- `[n]x` 删除（剪切）光标右边 n 个字符
- `[n]X` 删除（剪切）光标左边 n 个字符
- `D` 删除（剪切）当前位置到行尾的内容
- `d0` 删除（剪切）当前位置到行首的内容
- `d[n]w` 删除（剪切）光标右边 1(n)个单词
- `d[n]l` 删除（剪切）光标右边 1(n)个字符
- `d[n]h` 删除（剪切）光标左边 1(n)个字符
- `[n]dd` 删除（剪切）1(n)行

## 复制

- `y` 复制在可视模式下选中的文本
- `yy`或`Y` 复制整行文本
- `y[n]w` 复制一(n)个词
- `y[n]l` 复制光标右边 1(n)个字符
- `y[n]h` 复制光标左边 1(n)个字符

## 粘贴

- `p` 在光标之后粘贴
- `P` 在光标之前粘贴

## 查找

- `/[s]` 向后查找 s
- `?[s]` 向前查找 s
- `n` 向后查找下一个
- `N` 向前查找下一个

## 替换

- `:s/old/new` 用 new 替换当前行第一个 old
- `:s/old/new/g` 用 new 替换当前行所有的 old
- `:[n1],[n2]s/old/new/g` 用 new 替换文件 n1 行到 n2 行所有的 old
- `:%s/old/new/g` 用 new 替换文件中所有的 old
- `:%s/^/xxx/g` 在每一行的行首插入 xxx，^表示行首
- `:%s/$/xxx/g` 在每一行的行尾插入 xxx，\$表示行尾
- 所有替换命令末尾加上`c`，每个替换都将需要用户确认。 如：`%s/old/new/gc`，加上`i`则忽略大小写
